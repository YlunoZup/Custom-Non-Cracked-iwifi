if (!Date.now) {
    Date.now = function () {
        return new Date().getTime();
    };
}
(function () {
    "use strict";

    var e = ["webkit", "moz"];
    for (var t = 0; t < e.length && !window.requestAnimationFrame; ++t) {
        var i = e[t];
        window.requestAnimationFrame = window[i + "RequestAnimationFrame"];
        window.cancelAnimationFrame = window[i + "CancelAnimationFrame"] || window[i + "CancelRequestAnimationFrame"];
    }
    if (/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent) || !window.requestAnimationFrame || !window.cancelAnimationFrame) {
        var n = 0;
        window.requestAnimationFrame = function (e) {
            var t = Date.now();
            var i = Math.max(n + 16, t);
            return setTimeout(function () {
                e(n = i);
            }, i - t);
        };
        window.cancelAnimationFrame = clearTimeout;
    }
})();
var snowFall = function () {
    function e() {
        var e = {
            flakeCount: 35,
            flakeColor: "#ffffff",
            flakeIndex: 999999,
            flakePosition: "absolute",
            minSize: 1,
            maxSize: 2,
            minSpeed: 1,
            maxSpeed: 5,
            round: false,
            shadow: false,
            collection: false,
            image: false,
            collectionHeight: 40
        };
        var t = [];
        var n = {};
        var o = 0;
        var s = 0;
        var a = 0;
        var r = 0;
        var l = function (e, t) {
            for (var i in t) if (e.hasOwnProperty(i)) {
                e[i] = t[i];
            }
        };
        var h = function (e, t) {
            e.style.webkitTransform = t;
            e.style.MozTransform = t;
            e.style.msTransform = t;
            e.style.OTransform = t;
            e.style.transform = t;
        };
        var f = function (e, t) {
            for (var i in t) e.style[i] = t[i] + ("width" == i || "height" == i ? "px" : "");
        };
        var d = function (t, i, n) {
            this.x = Math.round(a + Math.random() * (s - a - a));
            this.y = Math.round(0 + Math.random() * (o - 0));
            this.size = i;
            this.speed = n;
            this.step = 0;
            this.stepSize = Math.round(1 + Math.random() * 9) / 100;
            var r = null;
            r = document.createElement("div");
            f(r, {
                background: "#ffffff"
            });
            r.className = "snowfall-flakes";
            f(r, {
                width: this.size,
                height: this.size,
                position: "absolute",
                top: 0,
                left: 0,
                "will-change": "transform",
                fontSize: 0,
                zIndex: 999999
            });
            if (t.tagName === document.body.tagName) {
                document.body.appendChild(r);
            } else {
                t.appendChild(r);
            }
            this.element = r;
            this.update = function () {
                this.y += this.speed;
                if (this.y > o - (this.size + 6)) {
                    this.reset();
                }
                h(this.element, "translateY(" + this.y + "px) translateX(" + this.x + "px)");
                this.step += this.stepSize;
                this.x += Math.cos(this.step);
                if (this.x + this.size > s - a || this.x < a) {
                    this.reset();
                }
            };
            this.reset = function () {
                this.y = 0;
                this.x = Math.round(a + Math.random() * (s - a - a));
                this.stepSize = Math.round(1 + Math.random() * 9) / 100;
                this.size = Math.round(100 + Math.random() * 100) / 100;
                this.element.style.width = this.size + "px";
                this.element.style.height = this.size + "px";
                this.speed = Math.round(1 + Math.random() * 4);
            };
        };
        var w = function () {
            for (var e = 0; e < t.length; e += 1) {
                t[e].update();
            }
            r = requestAnimationFrame(function () {
                w();
            });
        };
        return {
            snow: function (r, h) {
                l(e, h);
                n = r;
                o = n.offsetHeight;
                s = n.offsetWidth;
                n.snow = this;
                if ("body" === n.tagName.toLowerCase()) {
                    a = 25;
                }
                window.addEventListener("resize", function () {
                    o = n.clientHeight;
                    s = n.offsetWidth;
                }, true);
                for (i = 0; i < 35; i += 1) {
                    t.push(new d(n, Math.round(100 + Math.random() * 100) / 100, Math.round(1 + Math.random() * 4)));
                }
                w();
            },
            clear: function () {
                var e = null;
                e = n.getElementsByClassName ? n.getElementsByClassName("snowfall-flakes") : n.querySelectorAll(".snowfall-flakes");
                for (var t = e.length; t--;) {
                    if (e[t].parentNode === n) {
                        n.removeChild(e[t]);
                    }
                }
                cancelAnimationFrame(r);
            }
        };
    }
    return {
        snow: function (t, i) {
            if ("string" == typeof i) {
                if (t.length > 0) {
                    for (var n = 0; n < t.length; n++) {
                        if (t[n].snow) {
                            t[n].snow.clear();
                        }
                    }
                } else {
                    t.snow.clear();
                }
            } else if (t.length > 0) {
                for (var n = 0; n < t.length; n++) {
                    new e().snow(t[n], i);
                }
            } else {
                new e().snow(t, i);
            }
        }
    };
}();